# PostgreSQL Client Authentication Configuration
# For 2-Node HA Cluster with Streaming Replication
# ================================================

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local all all trust

# IPv4 local connections:
host all all 127.0.0.1/32 scram-sha-256
host all all ::1/128 scram-sha-256

# Allow connections from Docker network
host all all 172.20.0.0/16 scram-sha-256

# Allow connections from anywhere (for testing - restrict in production)
host all all 0.0.0.0/0 scram-sha-256

# Replication connections
host replication replicator 172.20.0.0/16 scram-sha-256
host replication replicator 0.0.0.0/0 scram-sha-256

# Allow postgres superuser from Docker network
host all postgres 172.20.0.0/16 scram-sha-256
